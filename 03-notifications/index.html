<button onclick="sendNotificationIn5Seconds" >Send notification in 5 seconds</button>
<script>
  const publicKey = 'BEGh6bJSeZ0k6u6WJuj_XC-d5aJSMkqPwQXgx7J43F4ML5XkrFyFUWATi8TxoRD9Yi1pZVN1TRQwJ6JYsDvArqo'
  
  const registration = await navigator.serviceWorker.register('/service-worker.js')

  // Subscribe to notifications
  const subscription = await registration.pushManager.subscribe({
    userVisibleOnly: true,
    applicationServerKey: urlBase64ToUint8Array(publicKey)
  })

  await fetch('/.netlify/functions/notify', {
    method: 'POST',
    body: JSON.stringify(subscription),
    headers: {
      'content-type': 'application/json'
    }
  })
</script>